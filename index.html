<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vida Saud√°vel PRO</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#00c853">

<style>
body{margin:0;font-family:Arial;background:#121212;color:white}
header{background:#00c853;padding:15px;text-align:center;font-size:20px}
nav{display:flex;background:#000}
nav button{flex:1;padding:12px;background:#000;color:white;border:none}
section{display:none;padding:15px}
section.active{display:block}
.card{background:#1e1e1e;padding:12px;border-radius:10px;margin:10px 0}
input,select{width:100%;padding:10px;margin:5px 0;border:none;border-radius:5px}
button{padding:10px;border:none;border-radius:6px;margin-top:5px;background:#00c853;color:white}
ul{padding:0}
li{list-style:none;background:#2a2a2a;margin:5px 0;padding:8px;border-radius:6px}
.smallbtn{padding:5px 8px;margin-left:5px;font-size:12px;background:#333}
</style>
</head>

<body>

<header>Vida Saud√°vel PRO</header>

<div id="loginTela" class="card">
<h3>Entrar</h3>
<input id="nomeUser" placeholder="Seu nome">
<button onclick="login()">Entrar</button>
</div>

<div id="app" style="display:none">

<nav>
<button onclick="showTab('refeicao')">üçΩ</button>
<button onclick="showTab('dieta')">üìä</button>
<button onclick="showTab('treino')">üèã</button>
<button onclick="showTab('peso')">‚öñ</button>
<button onclick="showTab('lembrete')">‚è∞</button>
</nav>

<section id="refeicao" class="active">
<div class="card">
<select id="alimento"></select>
<input type="number" id="quantidade" placeholder="Quantidade (g)">
<button onclick="addComida()">Adicionar</button>
<ul id="listaComidas"></ul>
<h3 id="totalRefeicao"></h3>
</div>
</section>

<section id="dieta">
<div class="card">
<input type="number" id="pesoIMC" placeholder="Peso (kg)">
<input type="number" id="alturaIMC" placeholder="Altura (m)">
<button onclick="gerarDieta()">Gerar Dieta</button>
<div id="dietaResultado"></div>
</div>
</section>

<section id="treino">
<div class="card">
<select id="diaTreino">
<option>Segunda</option><option>Ter√ßa</option><option>Quarta</option>
<option>Quinta</option><option>Sexta</option><option>S√°bado</option><option>Domingo</option>
</select>
<input id="nomeTreino" placeholder="Nome do treino">
<input id="linkTreino" placeholder="Link do v√≠deo">
<button onclick="addTreino()">Adicionar</button>
<ul id="listaTreino"></ul>
</div>
</section>

<section id="peso">
<div class="card">
<input type="number" id="novoPeso" placeholder="Novo peso">
<button onclick="salvarPeso()">Salvar</button>
<canvas id="graficoPeso"></canvas>
</div>
</section>

<section id="lembrete">
<div class="card">
<input id="aguaMin" placeholder="√Ågua (min)">
<button onclick="ativarAgua()">√Ågua</button>

<input id="comidaMin" placeholder="Refei√ß√£o (min)">
<button onclick="ativarComida()">Refei√ß√£o</button>

<input id="treinoMin" placeholder="Treino (min)">
<button onclick="ativarTreino()">Treino</button>

<input id="sonoMin" placeholder="Dormir (min)">
<button onclick="ativarSono()">Dormir</button>
</div>
</section>

</div>

<script>
document.addEventListener("DOMContentLoaded",function(){

if(localStorage.getItem("user")){
loginTela.style.display="none";
app.style.display="block";
}

window.login=function(){
localStorage.setItem("user",nomeUser.value);
loginTela.style.display="none";
app.style.display="block";
}

window.showTab=id=>{
document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
document.getElementById(id).classList.add("active");
}

/* ===== BANCO GIGANTE DE ALIMENTOS ===== */
const alimentos={
"Arroz branco":130,"Arroz integral":111,"Feij√£o":77,"Lentilha":116,
"Gr√£o-de-bico":164,"Macarr√£o":158,"Batata":86,"Batata doce":90,
"Mandioca":125,"P√£o franc√™s":265,"P√£o integral":247,"Aveia":389,
"Frango peito":165,"Carne bovina":250,"Carne mo√≠da":254,
"Peixe":128,"Atum":132,"Ovo":155,"Clara de ovo":52,
"Queijo":280,"Iogurte natural":59,"Leite":42,
"Abacate":160,"Amendoim":567,"Castanha":656,"Azeite":884,
"Banana":89,"Ma√ß√£":52,"Mam√£o":43,"Melancia":30,"Manga":60,
"Morango":32,"Laranja":47,"Uva":69,
"Alface":15,"Tomate":18,"Cenoura":41,"Br√≥colis":34,
"Hamb√∫rguer":295,"Pizza":266,"Batata frita":312,
"Chocolate":546,"Refrigerante":42
};

for(let a in alimentos){
let o=document.createElement("option");
o.text=a;
alimento.add(o);
}

/* ===== REFEI√á√ïES ===== */
let refeicoes=JSON.parse(localStorage.getItem("refeicoes")||"[]");

function salvarR(){localStorage.setItem("refeicoes",JSON.stringify(refeicoes));}

window.addComida=function(){
let qtd=quantidade.value;
if(!qtd)return;
let cal=(alimentos[alimento.value]*qtd)/100;
refeicoes.push({comida:alimento.value,qtd,cal});
salvarR();
renderR();
}

window.delComida=i=>{
refeicoes.splice(i,1);
salvarR();
renderR();
}

window.editarComida=i=>{
let n=prompt("Nova quantidade:",refeicoes[i].qtd);
if(!n)return;
refeicoes[i].qtd=n;
refeicoes[i].cal=(alimentos[refeicoes[i].comida]*n)/100;
salvarR();
renderR();
}

function renderR(){
listaComidas.innerHTML="";
let total=0;
refeicoes.forEach((r,i)=>{
total+=r.cal;
listaComidas.innerHTML+=`<li>${r.comida} ${r.qtd}g ${r.cal.toFixed(1)} kcal
<button class="smallbtn" onclick="editarComida(${i})">‚úèÔ∏è</button>
<button class="smallbtn" onclick="delComida(${i})">‚ùå</button>
</li>`;
});
totalRefeicao.innerText="Total: "+total.toFixed(1)+" kcal";
}
renderR();

/* ===== DIETA ===== */
window.gerarDieta=function(){
let imc=pesoIMC.value/(alturaIMC.value*alturaIMC.value);
let cal=imc<18.5?2500:imc<25?2000:1600;
dietaResultado.innerHTML="IMC: "+imc.toFixed(1)+"<br>Calorias sugeridas: "+cal;
}

/* ===== TREINOS ===== */
let treinos=JSON.parse(localStorage.getItem("treinos")||"[]");

function salvarTreinos(){localStorage.setItem("treinos",JSON.stringify(treinos));}

window.addTreino=function(){
treinos.push({dia:diaTreino.value,nome:nomeTreino.value,link:linkTreino.value});
salvarTreinos();
renderTreinos();
}

window.delTreino=i=>{
treinos.splice(i,1);
salvarTreinos();
renderTreinos();
}

function renderTreinos(){
listaTreino.innerHTML="";
treinos.forEach((t,i)=>{
listaTreino.innerHTML+=`<li><b>${t.dia}</b> - ${t.nome}
<a href="${t.link}" target="_blank"><button>Abrir</button></a>
<button class="smallbtn" onclick="delTreino(${i})">‚ùå</button>
</li>`;
});
}
renderTreinos();

/* ===== PESO ===== */
let pesos=JSON.parse(localStorage.getItem("pesos")||"[]");

window.salvarPeso=function(){
pesos.push(novoPeso.value);
localStorage.setItem("pesos",JSON.stringify(pesos));
grafico.update();
}

const grafico=new Chart(graficoPeso,{
type:'line',
data:{labels:pesos.map((_,i)=>i+1),
datasets:[{label:'Peso',data:pesos,borderColor:"#00c853"}]}
});

/* ===== LEMBRETES ===== */
function criar(msg,min){
return setInterval(()=>new Notification(msg),min*60000);
}

let a,c,t,s;

window.ativarAgua=()=>Notification.requestPermission().then(()=>{
clearInterval(a);
a=criar("Beber √°gua üíß",aguaMin.value);
});

window.ativarComida=()=>Notification.requestPermission().then(()=>{
clearInterval(c);
c=criar("Hora de comer üçΩ",comidaMin.value);
});

window.ativarTreino=()=>Notification.requestPermission().then(()=>{
clearInterval(t);
t=criar("Hora do treino üèã",treinoMin.value);
});

window.ativarSono=()=>Notification.requestPermission().then(()=>{
clearInterval(s);
s=criar("Hora de dormir üò¥",sonoMin.value);
});

});
</script>

</body>
</html>
