<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vida Saud√°vel PRO+</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body{margin:0;font-family:Arial;background:#f2f2f2}
header{background:#1b5e20;color:white;padding:15px;text-align:center}
nav{display:flex;overflow:auto;background:#2e7d32}
nav button{flex:1;padding:10px;border:none;background:#2e7d32;color:white}
section{display:none;padding:15px}
.active{display:block}
.card{background:white;padding:10px;margin:10px 0;border-radius:8px;box-shadow:0 0 5px #ccc}
input,select{padding:8px;margin:5px 0;width:100%}
button{padding:8px;border:none;border-radius:5px;margin-top:5px}
.delete{background:#c62828;color:white}
.edit{background:#f9a825;color:white}
</style>
</head>
<body>

<header><h2>Vida Saud√°vel PRO+</h2></header>

<nav>
<button onclick="showTab('refeicoes')">ü•ó</button>
<button onclick="showTab('dieta')">üìä</button>
<button onclick="showTab('treino')">üèã</button>
<button onclick="showTab('peso')">‚öñ</button>
<button onclick="showTab('lembrete')">‚è∞</button>
</nav>

<section id="refeicoes" class="active">
<div class="card">
<select id="alimento"></select>
<input id="quantidade" placeholder="Quantidade (g)">
<button onclick="addComida()">Adicionar</button>
<p id="totalRefeicao"></p>
<ul id="listaComidas"></ul>
</div>
</section>

<section id="dieta">
<div class="card">
<input id="pesoIMC" placeholder="Peso">
<input id="alturaIMC" placeholder="Altura">
<select id="objetivo">
<option>Emagrecer</option>
<option>Manter</option>
<option>Ganhar massa</option>
</select>
<button onclick="gerarDieta()">Gerar Dieta</button>
<p id="dietaResultado"></p>
</div>
</section>

<section id="treino">
<div class="card">
<button onclick="gerarTreino()">Gerar Treino Semanal</button>
<ul id="listaTreino"></ul>
</div>
</section>

<section id="peso">
<div class="card">
<input id="novoPeso" placeholder="Novo peso">
<button onclick="salvarPeso()">Salvar</button>
<canvas id="graficoPeso"></canvas>
</div>
</section>

<section id="lembrete">
<div class="card">
<input id="minutos" placeholder="Intervalo em minutos">
<button onclick="iniciarLembrete()">Ativar</button>
</div>
</section>

<script>
function showTab(id){
document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
document.getElementById(id).classList.add("active");
}

/* BANCO GRANDE DE ALIMENTOS */
const alimentos={
"Arroz":130,"Feij√£o":77,"Frango":165,"Carne":250,"Ovo":155,
"Macarr√£o":158,"Banana":89,"Ma√ß√£":52,"Leite":42,"Queijo":402,
"Aveia":389,"Batata":86,"Batata doce":90,"Peixe":206,"Salm√£o":208,
"Atum":132,"P√£o":265,"Iogurte":59,"Abacate":160,"Amendoim":567,
"Castanha":553,"Br√≥colis":34,"Cenoura":41,"Tomate":18,"Alface":15
};

const select=document.getElementById("alimento");
for(let a in alimentos){let o=document.createElement("option");o.text=a;select.add(o);}

let refeicoes=JSON.parse(localStorage.getItem("refeicoes")||"[]");

function salvarLS(){localStorage.setItem("refeicoes",JSON.stringify(refeicoes));}

function addComida(){
let comida=select.value;
let qtd=quantidade.value;
let cal=(alimentos[comida]*qtd)/100;
refeicoes.push({comida,qtd,cal});
salvarLS();
renderRefeicoes();
}

function renderRefeicoes(){
listaComidas.innerHTML="";
let total=0;
refeicoes.forEach((r,i)=>{
total+=r.cal;
listaComidas.innerHTML+=`<li>${r.comida} ${r.cal.toFixed(1)} kcal 
<button class='delete' onclick='delComida(${i})'>X</button></li>`;
});
totalRefeicao.innerText="Total: "+total.toFixed(1)+" kcal";
}

function delComida(i){refeicoes.splice(i,1);salvarLS();renderRefeicoes();}
renderRefeicoes();

/* DIETA AUTOM√ÅTICA */
function gerarDieta(){
let p=pesoIMC.value,a=alturaIMC.value;
let imc=p/(a*a);
let cal=imc<18?2500:imc<25?2000:1600;
dietaResultado.innerText="Calorias sugeridas/dia: "+cal;
}

/* TREINO */
function gerarTreino(){
let dias=["Seg: Pernas","Ter: Peito","Qua: Costas","Qui: Ombro","Sex: Bra√ßos"];
listaTreino.innerHTML=dias.map(d=>"<li>"+d+"</li>").join("");
}

/* PESO + GR√ÅFICO */
let pesos=JSON.parse(localStorage.getItem("pesos")||"[]");
function salvarPeso(){
pesos.push(novoPeso.value);
localStorage.setItem("pesos",JSON.stringify(pesos));
grafico.update();
}
const ctx=document.getElementById('graficoPeso');
const grafico=new Chart(ctx,{type:'line',data:{labels:pesos.map((_,i)=>i+1),datasets:[{label:'Peso',data:pesos}]}});

/* LEMBRETE */
function iniciarLembrete(){
Notification.requestPermission().then(()=>{
setInterval(()=>new Notification("Hora do lembrete!"),minutos.value*60000);
});
}
</script>
</body>
</html>
